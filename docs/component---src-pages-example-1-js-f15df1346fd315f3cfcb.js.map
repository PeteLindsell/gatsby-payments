{"version":3,"sources":["webpack:///./src/pages/example-1.js","webpack:///./src/components/CustomCheckoutForm.js"],"names":["MyStoreCheckout","render","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","_components_layout__WEBPACK_IMPORTED_MODULE_2__","_components_seo__WEBPACK_IMPORTED_MODULE_3__","title","react_stripe_elements_universal__WEBPACK_IMPORTED_MODULE_1__","apiKey","_components_CustomCheckoutForm__WEBPACK_IMPORTED_MODULE_4__","React","Component","SignupSchema","Yup","shape","donationAmount","required","firstName","min","max","lastName","email","StyledCardElement","styled","CardElement","withConfig","displayName","componentId","CustomCheckoutForm","props","_React$Component","call","this","componentDidMount","window","Stripe","stripe","betas","handleSubmit","_callee","event","_ref","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default","wrap","_context","prev","next","preventDefault","handleCardPayment","StripeCardElement","sent","paymentIntent","error","stop","_this","react__WEBPACK_IMPORTED_MODULE_6___default","formik__WEBPACK_IMPORTED_MODULE_8__","initialValues","validationSchema","onSubmit","values","createToken","name","then","res","console","log","fetch","credentials","mode","headers","Accept","Content-Type","method","body","JSON","stringify","token","id","amount","_ref2","errors","touched","handleChange","setFieldValue","_components_UI_Button_Button__WEBPACK_IMPORTED_MODULE_12__","type","appearance","onClick","_components_UI_TextField_TextField__WEBPACK_IMPORTED_MODULE_13__","extraLeft","onChange","value","label","phone","_components_UI_Label__WEBPACK_IMPORTED_MODULE_15__","ref","thisCardElement","injectStripe"],"mappings":"6JAQMA,kLACJC,OAAA,WACE,OACEC,EAAAC,EAAAC,cAACC,EAAA,EAAD,KACEH,EAAAC,EAAAC,cAACE,EAAA,EAAD,CAAKC,MAAM,cACXL,EAAAC,EAAAC,cAACI,EAAA,eAAD,CAAgBC,OAAO,8CACrBP,EAAAC,EAAAC,cAACI,EAAA,SAAD,KACEN,EAAAC,EAAAC,cAACM,EAAA,EAAD,aAPkBC,IAAMC,WAerBZ,+TCXf,IAAMa,EAAeC,WAAaC,MAAM,CACtCC,eAAgBF,WACbG,SAAS,YACZC,UAAWJ,WACRK,IAAI,EAAG,cACPC,IAAI,GAAI,aACRH,SAAS,YACZI,SAAUP,WACPK,IAAI,EAAG,cACPC,IAAI,GAAI,aACRH,SAAS,YACZK,MAAOR,WACJQ,MAAM,iBACNL,SAAS,cAGRM,EAAoBC,YAAOC,eAAVC,WAAA,CAAAC,YAAA,wCAAAC,YAAA,YAAGJ,CAAH,gKAYjBK,sBACL,SAAAA,EAAYC,GAAO,OAClBC,EAAAC,KAAAC,KAAMH,IADYG,uHAGnBC,kBAAA,WACK,oBAAOC,aAA4B,IAAOA,OAAOC,SACpDH,KAAKI,OAASF,OAAOC,OAAP,SAAwB,CACrCE,MAAO,CAAC,+BAILC,4CAAN,SAAAC,EAAmBC,GAAnB,IAAAC,EAAA,OAAAC,EAAAxC,EAAAyC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACCN,EAAMO,iBADPH,EAAAE,KAAA,EAEwCd,KAAKI,OAAOY,kBAAZ,kBAEtChB,KAAKiB,mBAJP,OAAAR,EAAAG,EAAAM,KAAAT,EAESU,cAFTV,EAEwBW,MAFxB,wBAAAR,EAAAS,SAAAd,EAAAP,6OAQAhC,OAAA,WAAS,IAAAsD,EAAAtB,KACR,OACIuB,EAAArD,EAAAC,cAACqD,EAAA,EAAD,CACEC,cAAe,CACb1C,eAAgB,GAChBE,UAAW,GACXG,SAAU,GACVC,MAAO,IAETqC,iBAAkB9C,EAClB+C,SAAU,SAAAC,GAGRN,EAAKzB,MAAMO,OAAOyB,YAAY,CAACC,KAAM,SACpCC,KAAK,SAAAC,GACJC,QAAQC,IAAI,CAAEF,QACdG,MAAM,8BAA+B,CACnCC,YAAa,cACbC,KAAM,OACNC,QAAS,CAACC,OAAU,mBAAoBC,eAAgB,oBACxDC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBC,MAAOb,EAAIa,MAAMC,GACjBC,OAAgC,IAAxBnB,EAAO7C,mBAGlBgD,KAAK,SAAAC,GACJC,QAAQC,IAAI,CAAEF,YAGlBC,QAAQC,IAAIN,KAGb,SAAAoB,GAAA,IAAGC,EAAHD,EAAGC,OAAiBrB,GAApBoB,EAAWE,QAAXF,EAAoBpB,QAAQuB,EAA5BH,EAA4BG,aAAc7C,EAA1C0C,EAA0C1C,aAAc8C,EAAxDJ,EAAwDI,cAAxD,OACC7B,EAAArD,EAAAC,cAACqD,EAAA,EAAD,KACED,EAAArD,EAAAC,cAAA,gBACEoD,EAAArD,EAAAC,cAAA,iCACAoD,EAAArD,EAAAC,cAAA,WACEoD,EAAArD,EAAAC,cAACkF,EAAA,EAAD,CACEC,KAAK,SACLC,WAAsC,KAA1B3B,EAAO7C,eAAwB,UAAY,UACvDyE,QAAS,kBAAMJ,EAAc,iBAAkB,MAHjD,OAOA7B,EAAArD,EAAAC,cAACkF,EAAA,EAAD,CACEC,KAAK,SACLC,WAAsC,KAA1B3B,EAAO7C,eAAwB,UAAY,UACvDyE,QAAS,kBAAMJ,EAAc,iBAAkB,MAHjD,OAOA7B,EAAArD,EAAAC,cAACkF,EAAA,EAAD,CACEC,KAAK,SACLC,WAAsC,MAA1B3B,EAAO7C,eAAyB,UAAY,UACxDyE,QAAS,kBAAMJ,EAAc,iBAAkB,OAHjD,SAQF7B,EAAArD,EAAAC,cAACsF,EAAA,EAAD,CACEC,UAAU,IACV5B,KAAK,iBACL6B,SAAUR,EACVS,MAAOhC,EAAO7C,eACdqC,MAAO6B,EAAOlE,eACduE,KAAK,YAGT/B,EAAArD,EAAAC,cAACsF,EAAA,EAAD,CACEI,MAAM,aACN/B,KAAK,YACL6B,SAAUR,EACVS,MAAOhC,EAAO3C,UACdmC,MAAO6B,EAAOhE,YAEhBsC,EAAArD,EAAAC,cAACsF,EAAA,EAAD,CACEI,MAAM,YACN/B,KAAK,WACL6B,SAAUR,EACVS,MAAOhC,EAAOxC,SACdgC,MAAO6B,EAAO7D,WAEhBmC,EAAArD,EAAAC,cAACsF,EAAA,EAAD,CACEI,MAAM,gBACN/B,KAAK,QACL6B,SAAUR,EACVS,MAAOhC,EAAOvC,MACd+B,MAAO6B,EAAO5D,QAEhBkC,EAAArD,EAAAC,cAACsF,EAAA,EAAD,CACEI,MAAM,eACN/B,KAAK,QACL6B,SAAUR,EACVS,MAAOhC,EAAOkC,MACd1C,MAAO6B,EAAOa,QAEhBvC,EAAArD,EAAAC,cAAC4F,EAAA,EAAD,oBACExC,EAAArD,EAAAC,cAACmB,EAAD,CAAmB0E,IAAK,SAACC,GAAqB3C,EAAKL,kBAAoBgD,MAEzE1C,EAAArD,EAAAC,cAACkF,EAAA,EAAD,CAAQC,KAAK,SAASC,WAAW,UAAUC,QAASlD,GAApD,sBAvHqB5B,IAAMC,WAiIxBuF,2BAAatE","file":"component---src-pages-example-1-js-f15df1346fd315f3cfcb.js","sourcesContent":["import React from 'react';\nimport { Elements, StripeProvider } from \"react-stripe-elements-universal\";\n\nimport Layout from \"../components/layout\";\nimport SEO from \"../components/seo\";\n\nimport CustomCheckoutForm from '../components/CustomCheckoutForm';\n\nclass MyStoreCheckout extends React.Component {\n  render() {\n    return (\n      <Layout>\n        <SEO title=\"Example 1\" />\n        <StripeProvider apiKey=\"pk_test_5r9fnuslIznmQtNHSkRV3HQj00w1467fNY\">\n          <Elements>\n            <CustomCheckoutForm />\n          </Elements>\n        </StripeProvider>\n      </Layout>\n    );\n  }\n}\n\nexport default MyStoreCheckout;\n","import React from 'react'\nimport { CardElement, injectStripe } from 'react-stripe-elements-universal'\nimport { Formik, Form, Field } from \"formik\";\nimport * as Yup from \"yup\";\nimport styled from \"styled-components\"\n\nimport Box from \"../components/UI/Box/Box\";\nimport Button from \"../components/UI/Button/Button\";\nimport TextField from \"../components/UI/TextField/TextField\";\nimport su2cTheme from '../components/UI/themes/su2c';\nimport Label from \"../components/UI/Label\"\n\nconst SignupSchema = Yup.object().shape({\n  donationAmount: Yup.string()\n    .required(\"Required\"),\n  firstName: Yup.string()\n    .min(2, \"Too Short!\")\n    .max(50, \"Too Long!\")\n    .required(\"Required\"),\n  lastName: Yup.string()\n    .min(2, \"Too Short!\")\n    .max(50, \"Too Long!\")\n    .required(\"Required\"),\n  email: Yup.string()\n    .email(\"Invalid email\")\n    .required(\"Required\")\n});\n\nconst StyledCardElement = styled(CardElement)`\n  background-color: #fff;\n  background-image: none;\n  border-radius: 3px;\n  border: solid 2px #c8c9c7;\n  color: #333;\n  display: block;\n  font-size: 1rem;\n  padding: 6px 8px;\n  width: 100%;\n`;\n\nclass CustomCheckoutForm extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t}\n\tcomponentDidMount() {\n\t\tif((typeof window !== `undefined`) && (typeof window.Stripe !== `undefined`)) {\n\t\t\tthis.stripe = window.Stripe(`my_key`, {\n\t\t\t\tbetas: ['payment_intent_beta_3']\n\t\t\t})\n\t\t}\n\t}\n\tasync handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tconst { paymentIntent, error } = await this.stripe.handleCardPayment(\n\t \t\t`a client_secret`,\n\t\t\tthis.StripeCardElement\n    )\n    // .then(...and so on)\n\t}\n\trender() {\n\t\treturn (\n      <Formik\n        initialValues={{\n          donationAmount: \"\",\n          firstName: \"\",\n          lastName: \"\",\n          email: \"\"\n        }}\n        validationSchema={SignupSchema}\n        onSubmit={values => {\n          // same shape as initial values\n          \n          this.props.stripe.createToken({name: \"Name\"})\n          .then(res => {\n            console.log({ res })\n            fetch('https://ornovia.com/payment', {\n              credentials: 'same-origin',\n              mode: 'cors',\n              headers: {'Accept': 'application/json', 'Content-Type': 'application/json'},\n              method: 'POST',\n              body: JSON.stringify({\n                token: res.token.id,\n                amount: values.donationAmount * 100\n              })\n            })\n            .then(res => {\n              console.log({ res })\n            })\n          });\n          console.log(values);\n        }}\n      >\n        {({ errors, touched, values, handleChange, handleSubmit, setFieldValue }) => (\n          <Form>\n            <fieldset>\n              <legend>Donation amount</legend>\n              <div>\n                <Button\n                  type=\"button\"\n                  appearance={values.donationAmount === 20 ? \"primary\" : \"defailt\"}\n                  onClick={() => setFieldValue(\"donationAmount\", 20)}\n                >\n                  £20\n                </Button>\n                <Button\n                  type=\"button\"\n                  appearance={values.donationAmount === 50 ? \"primary\" : \"defailt\"}\n                  onClick={() => setFieldValue(\"donationAmount\", 50)}\n                >\n                  £50\n                </Button>\n                <Button\n                  type=\"button\"\n                  appearance={values.donationAmount === 100 ? \"primary\" : \"defailt\"}\n                  onClick={() => setFieldValue(\"donationAmount\", 100)}\n                >\n                  £100\n                </Button>\n              </div>\n              <TextField\n                extraLeft=\"£\"\n                name=\"donationAmount\"\n                onChange={handleChange}\n                value={values.donationAmount}\n                error={errors.donationAmount}\n                type=\"number\"\n              />\n            </fieldset>\n            <TextField\n              label=\"First name\"\n              name=\"firstName\"\n              onChange={handleChange}\n              value={values.firstName}\n              error={errors.firstName}\n            />\n            <TextField\n              label=\"Last name\"\n              name=\"lastName\"\n              onChange={handleChange}\n              value={values.lastName}\n              error={errors.lastName}\n            />\n            <TextField\n              label=\"Email address\"\n              name=\"email\"\n              onChange={handleChange}\n              value={values.email}\n              error={errors.email}\n            />\n            <TextField\n              label=\"Phone number\"\n              name=\"phone\"\n              onChange={handleChange}\n              value={values.phone}\n              error={errors.phone}\n            />\n            <Label>Card details\n              <StyledCardElement ref={(thisCardElement) => {this.StripeCardElement = thisCardElement}} />\n            </Label>\n            <Button type=\"submit\" appearance=\"primary\" onClick={handleSubmit}>\n              Donate Now!\n            </Button>\n          </Form>\n        )}\n      </Formik>\n    )\n\t}\n}\n\nexport default injectStripe(CustomCheckoutForm);\n//export default CustomCheckoutForm;\n"],"sourceRoot":""}